# ssl-selfsigned-standalone

Упрощенная роль для генерации самоподписанных SSL сертификатов на каждом сервере локально.

## Описание

Роль создает самоподписанные сертификаты ECC на каждом сервере без использования центрального CA и копирования между серверами. Каждый сервер получает уникальный сертификат с правильными SAN записями.

## Переменные

| Переменная | Значение по умолчанию | Описание |
|------------|----------------------|----------|
| `ssl_path` | `/opt/ssl/selfsign` | Путь для хранения сертификатов |
| `ssl_privkey_path` | `{{ ssl_path }}/privkey.pem` | Путь к приватному ключу |
| `ssl_cert_path` | `{{ ssl_path }}/fullchain.pem` | Путь к сертификату |
| `ssl_user` | `root` | Владелец файлов сертификатов |
| `ssl_group` | `root` | Группа файлов сертификатов |
| `ssl_common_name` | `{{ ansible_fqdn }}` | CN сертификата |
| `ssl_subject_alt_name` | См. defaults/main.yml | Альтернативные имена |
| `ssl_cert_not_after` | `+3650d` | Срок действия сертификата |
| `ssl_privkey_type` | `ECC` | Тип ключа |
| `ssl_curve` | `secp256r1` | Кривая для ECC ключа |

## Принудительное пересоздание

Для принудительного пересоздания сертификатов установите переменную:

```yaml
ssl_selfsign_recreate_force: true
```

## Изменения по сравнению с предыдущей версией

- Удалена сложная логика mTLS и CA
- Убрано делегирование и копирование между серверами
- Каждый сервер генерирует свой уникальный сертификат
- Автоматическая настройка SAN на основе данных Ansible
- Упрощена структура задач и переменных
