---
- name: Copy Vector configure file
  ansible.builtin.template:
    src: "vector.toml.{{ vector_config_file }}.j2"
    dest: "{{ vector_conf_path }}/vector.toml"
    owner: "root"
    group: "root"
    mode: "0644"
  notify: restart vector

- name: Copy Vector systemd service file
  ansible.builtin.template:
    src: "vector.service.j2"
    dest: "/etc/systemd/system/vector.service"
    owner: "root"
    group: "root"
    mode: "0644"
  notify: restart vector

- name: Ensure Vector is enabled on boot
  ansible.builtin.systemd:
    daemon_reload: true
    name: vector
    enabled: true
    state: started
