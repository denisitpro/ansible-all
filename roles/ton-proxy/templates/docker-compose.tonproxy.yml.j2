services:
  tonproxy:
    image: tonstakers/ton-proxy:{{tonproxy_image_version | default('latest')}}
    container_name: tonproxy
    hostname: tonproxy-{{ stand_type | default('none') }}
    network_mode: host
{% if tonproxy_restart is defined %}
    restart: always
{% endif %}
    volumes:
      - {{tonproxy_data_path}}/keyring:/opt/ton-proxy/keyring
    command: "rldp-http-proxy -p {{tonproxy_port_in}} -a {{tonproxy_bind_addr}}:{{tonproxy_blockchain_in}} -C global.config.json -A {{toproxy_adnl_id}} -d"
    logging:
{% if vector_server_fluent_address is defined %}
      driver: fluentd
      options:
        fluentd-address: {{vector_server_fluent_address}}:{{ vector_server_fluent_port | default('24224') }}
        tag: nginx-docker
        fluentd-async: "{{fluent_async}}"
        fluentd-buffer-limit: "{{fluendt_buffer_limit}}"
{% else %}
      driver: json-file
      options:
        max-size: 100m
        max-file: '2'
{% endif %}








