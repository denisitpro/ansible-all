{{ ansible_managed | comment }}

groups:
- name: base alert rules
  rules:
  - alert: Watchdog
    expr: vector(1)
    for: 10m
    labels:
      severity: info
    annotations:
      description: 'This is an alert meant to ensure that the entire alerting pipeline is functional. '
      summary: 'Ensure entire alerting pipeline is functional'

  # - alert: RebootRequired
  #   expr: |
  #     node_reboot_required{instance!~"{{ excld_inst_reboot_required | default([]) | join('|') }}"} == 1
  #   for: 5m
  #   labels:
  #     severity: info
  #   annotations:
  #     description: "{% raw %}{{ $labels.instance }} requires a system reboot.{% endraw %}"
  #     summary: "{% raw %}Reboot required on {{ $labels.instance }}{% endraw %}"
