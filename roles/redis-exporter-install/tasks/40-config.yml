---
- name: Copy the Redis Exporter systemd service file
  ansible.builtin.template:
    src: "redis-exporter.service.j2"
    dest: "/etc/systemd/system/redis-exporter.service"
    owner: "root"
    group: "root"
    mode: "0644"
  notify: redis-exporter-unit-restart
  tags:
    - redis-exporter-unit

- name: Ensure Redis Exporter is enabled on boot
  ansible.builtin.systemd:
    daemon_reload: true
    name: redis-exporter
    enabled: true
    state: started
