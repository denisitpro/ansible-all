---

- name: Create folder for redis compose
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: '0755'
  with_items:
    - "{{ redis_docker_compose_path }}/redis"

- name: Copy compose-file - redis
  ansible.builtin.template:
    src: "docker-compose.redis.yml.j2"
    dest: "{{ redis_docker_compose_path }}/redis/docker-compose.yml"
    mode: 0600
  tags:
    - config
    - reconfigure

- name: Run restart compose
  ansible.builtin.shell:
    cmd: "docker-compose down && docker-compose up -d"
  args:
    chdir: "{{ redis_docker_compose_path }}/redis"
